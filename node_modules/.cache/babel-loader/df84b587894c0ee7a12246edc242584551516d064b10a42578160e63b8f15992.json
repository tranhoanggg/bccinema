{"ast":null,"code":"var _jsxFileName = \"D:\\\\MyFolder\\\\VisualStudioCode\\\\Project\\\\Web\\\\bccinema\\\\frontend\\\\src\\\\components\\\\EndowList\\\\EndowList.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport \"./EndowList.css\";\nimport { FaChevronLeft, FaChevronRight } from \"react-icons/fa\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EndowList() {\n  _s();\n  const [endows, setEndows] = useState([]);\n  const [index, setIndex] = useState(0);\n  const [isAnimating, setIsAnimating] = useState(true);\n  const [itemWidth, setItemWidth] = useState(0);\n  const viewportRef = useRef(null);\n  const itemsPerPage = 3;\n  const gap = 20;\n\n  // fetch data\n  useEffect(() => {\n    fetch(\"http://localhost:5000/endow\").then(r => r.json()).then(data => setEndows(data || [])).catch(e => console.error(\"Lỗi fetch endows:\", e));\n  }, []);\n\n  // tính chiều rộng mỗi item\n  useEffect(() => {\n    function recompute() {\n      if (!viewportRef.current) return;\n      const w = viewportRef.current.clientWidth;\n      const computed = Math.floor((w - gap * (itemsPerPage - 1)) / itemsPerPage);\n      setItemWidth(computed > 100 ? computed : 120);\n    }\n    recompute();\n    window.addEventListener(\"resize\", recompute);\n    return () => window.removeEventListener(\"resize\", recompute);\n  }, []);\n\n  // extended array (3 copies để loop)\n  const extended = [...endows, ...endows, ...endows];\n  const step = itemWidth + gap;\n\n  // khởi tạo ở giữa copy\n  useEffect(() => {\n    if (endows.length === 0) return;\n    setIsAnimating(false);\n    setIndex(endows.length);\n    const id = setTimeout(() => setIsAnimating(true), 20);\n    return () => clearTimeout(id);\n  }, [endows.length, itemWidth]);\n\n  // next / prev\n  const next = () => {\n    if (endows.length === 0) return;\n    setIsAnimating(true);\n    setIndex(s => s + 1);\n  };\n  const prev = () => {\n    if (endows.length === 0) return;\n    setIsAnimating(true);\n    setIndex(s => s - 1);\n  };\n\n  // xử lý vòng lặp\n  const onTransitionEnd = () => {\n    if (endows.length === 0) return;\n    if (index >= endows.length * 2) {\n      setIsAnimating(false);\n      setIndex(s => s - endows.length);\n      setTimeout(() => setIsAnimating(true), 20);\n    } else if (index < endows.length) {\n      setIsAnimating(false);\n      setIndex(s => s + endows.length);\n      setTimeout(() => setIsAnimating(true), 20);\n    }\n  };\n\n  // style cho track\n  const trackStyle = {\n    width: `${extended.length * step}px`,\n    transform: `translateX(-${index * step}px)`,\n    transition: isAnimating ? \"transform 0.45s cubic-bezier(.22,.9,.18,1)\" : \"none\"\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"endow-list-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"endow-list-title\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"endow-list-title-inner\",\n        children: \"\\u01AFU \\u0110\\xC3I \\u0110\\u1EB6C BI\\u1EC6T\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"arrow left\",\n      onClick: prev,\n      \"aria-label\": \"Prev\",\n      children: /*#__PURE__*/_jsxDEV(FaChevronLeft, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"arrow right\",\n      onClick: next,\n      \"aria-label\": \"Next\",\n      children: /*#__PURE__*/_jsxDEV(FaChevronRight, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"endow-slider-viewport\",\n      ref: viewportRef,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"endow-track\",\n        style: trackStyle,\n        onTransitionEnd: onTransitionEnd,\n        children: extended.map((ed, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"endow-card\",\n          style: {\n            width: `${itemWidth}px`,\n            minWidth: `${itemWidth}px`\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"endow-img\",\n            src: require(`../../assets/images/Endow/${ed.ID}.jpg`),\n            alt: ed.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"endow-name\",\n            children: ed.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 15\n          }, this)]\n        }, `${ed.ID}-${idx}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n_s(EndowList, \"ZYmnQBzSZ6ZbMKGKJ8AYo2U/Vso=\");\n_c = EndowList;\nexport default EndowList;\nvar _c;\n$RefreshReg$(_c, \"EndowList\");","map":{"version":3,"names":["React","useEffect","useState","useRef","FaChevronLeft","FaChevronRight","jsxDEV","_jsxDEV","EndowList","_s","endows","setEndows","index","setIndex","isAnimating","setIsAnimating","itemWidth","setItemWidth","viewportRef","itemsPerPage","gap","fetch","then","r","json","data","catch","e","console","error","recompute","current","w","clientWidth","computed","Math","floor","window","addEventListener","removeEventListener","extended","step","length","id","setTimeout","clearTimeout","next","s","prev","onTransitionEnd","trackStyle","width","transform","transition","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","style","map","ed","idx","minWidth","src","require","ID","alt","name","_c","$RefreshReg$"],"sources":["D:/MyFolder/VisualStudioCode/Project/Web/bccinema/frontend/src/components/EndowList/EndowList.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport \"./EndowList.css\";\r\nimport { FaChevronLeft, FaChevronRight } from \"react-icons/fa\";\r\n\r\nfunction EndowList() {\r\n  const [endows, setEndows] = useState([]);\r\n  const [index, setIndex] = useState(0);\r\n  const [isAnimating, setIsAnimating] = useState(true);\r\n  const [itemWidth, setItemWidth] = useState(0);\r\n\r\n  const viewportRef = useRef(null);\r\n\r\n  const itemsPerPage = 3;\r\n  const gap = 20;\r\n\r\n  // fetch data\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/endow\")\r\n      .then((r) => r.json())\r\n      .then((data) => setEndows(data || []))\r\n      .catch((e) => console.error(\"Lỗi fetch endows:\", e));\r\n  }, []);\r\n\r\n  // tính chiều rộng mỗi item\r\n  useEffect(() => {\r\n    function recompute() {\r\n      if (!viewportRef.current) return;\r\n      const w = viewportRef.current.clientWidth;\r\n      const computed = Math.floor(\r\n        (w - gap * (itemsPerPage - 1)) / itemsPerPage\r\n      );\r\n      setItemWidth(computed > 100 ? computed : 120);\r\n    }\r\n    recompute();\r\n    window.addEventListener(\"resize\", recompute);\r\n    return () => window.removeEventListener(\"resize\", recompute);\r\n  }, []);\r\n\r\n  // extended array (3 copies để loop)\r\n  const extended = [...endows, ...endows, ...endows];\r\n  const step = itemWidth + gap;\r\n\r\n  // khởi tạo ở giữa copy\r\n  useEffect(() => {\r\n    if (endows.length === 0) return;\r\n    setIsAnimating(false);\r\n    setIndex(endows.length);\r\n    const id = setTimeout(() => setIsAnimating(true), 20);\r\n    return () => clearTimeout(id);\r\n  }, [endows.length, itemWidth]);\r\n\r\n  // next / prev\r\n  const next = () => {\r\n    if (endows.length === 0) return;\r\n    setIsAnimating(true);\r\n    setIndex((s) => s + 1);\r\n  };\r\n  const prev = () => {\r\n    if (endows.length === 0) return;\r\n    setIsAnimating(true);\r\n    setIndex((s) => s - 1);\r\n  };\r\n\r\n  // xử lý vòng lặp\r\n  const onTransitionEnd = () => {\r\n    if (endows.length === 0) return;\r\n    if (index >= endows.length * 2) {\r\n      setIsAnimating(false);\r\n      setIndex((s) => s - endows.length);\r\n      setTimeout(() => setIsAnimating(true), 20);\r\n    } else if (index < endows.length) {\r\n      setIsAnimating(false);\r\n      setIndex((s) => s + endows.length);\r\n      setTimeout(() => setIsAnimating(true), 20);\r\n    }\r\n  };\r\n\r\n  // style cho track\r\n  const trackStyle = {\r\n    width: `${extended.length * step}px`,\r\n    transform: `translateX(-${index * step}px)`,\r\n    transition: isAnimating\r\n      ? \"transform 0.45s cubic-bezier(.22,.9,.18,1)\"\r\n      : \"none\",\r\n  };\r\n\r\n  return (\r\n    <section className=\"endow-list-container\">\r\n      <h2 className=\"endow-list-title\">\r\n        <span className=\"endow-list-title-inner\">ƯU ĐÃI ĐẶC BIỆT</span>\r\n      </h2>\r\n\r\n      <button className=\"arrow left\" onClick={prev} aria-label=\"Prev\">\r\n        <FaChevronLeft />\r\n      </button>\r\n      <button className=\"arrow right\" onClick={next} aria-label=\"Next\">\r\n        <FaChevronRight />\r\n      </button>\r\n\r\n      <div className=\"endow-slider-viewport\" ref={viewportRef}>\r\n        <div\r\n          className=\"endow-track\"\r\n          style={trackStyle}\r\n          onTransitionEnd={onTransitionEnd}\r\n        >\r\n          {extended.map((ed, idx) => (\r\n            <div\r\n              key={`${ed.ID}-${idx}`}\r\n              className=\"endow-card\"\r\n              style={{ width: `${itemWidth}px`, minWidth: `${itemWidth}px` }}\r\n            >\r\n              <img\r\n                className=\"endow-img\"\r\n                src={require(`../../assets/images/Endow/${ed.ID}.jpg`)}\r\n                alt={ed.name}\r\n              />\r\n              <h3 className=\"endow-name\">{ed.name}</h3>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default EndowList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}